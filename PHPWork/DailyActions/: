<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use App\Models\Action;

class ActionsController extends Controller
{
  public function __construct()
  {
    //認証済か確認
    $this->middleware('auth');

		//当日日付を取得
		public $today = date('Y-m-d');
  }

  public function index()
  {
		$user_id = Auth::id;
		$actions = Action::where('user_id', $user_id)->where('date', $today)->get();

		if (is_null($actions)){
			// 本日に登録がない場合、新規作成画面を出力
			return view('actions.create');
		}
		else
		{
			// 本日に登録がある場合、編集画面を出力
			return view('actions.edit', ['actions' => $actions]);
  }


}

